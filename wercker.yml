box: wercker/nodejs
build:
  steps:
    - script:
        name: install cloud foundry cli
        code: |
          URL='https://cli.run.pivotal.io/stable?release=debian64&source=github'
          FILE=`mktemp`
          wget "$URL" -qO $FILE && sudo dpkg -i $FILE
          rm $FILE
    - npm-install
    - npm-test
    - script:
        name: echo nodejs information
        code: |
          echo "node version $(node -v) running"
          echo "npm version $(npm -v) running"
deploy:
  steps:
    - script:
        name: publish to swisscom cloud
        code: |
          cf login -u $CF_USERNAME -p $CF_PASSWORD
          cf push yow-hackathon